webpackJsonp([151],{Ugw0:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Dd8w"),r=a.n(i),s=a("NYxO"),n=a("P0XF"),l={name:"Add",components:{BaseTable:function(){return a.e(154).then(a.bind(null,"ss0d"))},QueryForm:function(){return a.e(158).then(a.bind(null,"Hb8j"))}},data:function(){return{indexDialogShow:!1,targetFeeRateFlag:!1,targetChangeCostRateFlag:!1,tempcolumns:[{prop:"subInstitution",label:"机构",width:160},{prop:"type",label:"预算周期",width:100},{prop:"timeSlot",label:"预算时间段",width:120},{prop:"channel",label:"预算渠道",width:120},{prop:"targetPremium",label:"预算保费收入（元）",width:140,isEdit:!1,type:"input"},{prop:"targetCostRate",label:"预算保单成本率（%） + ",width:180,isShow:!1,children:[{prop:"targetPayRate",label:"预算保单赔付率(%)",width:140,isEdit:!1,type:"input"},{prop:"targetFeeRate",label:"预算保单费用率(%)",width:140},{prop:"targetCostRate",label:"合计",width:140}]},{prop:"targetChangeCostRate",label:"预算变动成本率(%) + ",width:180,isShow:!1,children:[{prop:"targetPayRate",label:"预算保单赔付率(%)",width:140,isEdit:!1,type:"input"},{prop:"saleRate",label:"销售费用率(%)",width:140},{prop:"targetChangeCostRate",label:"合计",width:140}]},{prop:"targetBjCostRate",label:"预算边际成本率(%) + ",width:180,isShow:!1,children:[{prop:"targetPayRate",label:"预算保单赔付率(%)",width:140,isEdit:!1,type:"input"},{prop:"serverFeeRate",label:"手续费率(%)",width:140,isEdit:!1,type:"input"},{prop:"addTax",label:"增值税附加(%)",width:140,isEdit:!1,type:"input"},{prop:"targetBjCostRate",label:"合计",width:140}]},{prop:"targetPayRate",label:"预算保单赔付率(%) + ",width:180,isShow:!1,children:[{prop:"targetExpPayRate",label:"预算理赔费用率(%) + ",width:180,isShow:!1,children:[{prop:"targetDirectExpPayRate",label:"预算直接理赔费用率(%)",width:180,isEdit:!1,type:"input"},{prop:"targetIndirectExpPayRate",label:"预算间接理赔费用率(%)",width:180,isEdit:!1,type:"input"},{prop:"targetExpPayRate",label:"合计",width:140}]},{prop:"targetComPayRate",label:"预算预期赔付率(%)",width:140,isEdit:!1,type:"input"},{prop:"targetPayRate",label:"合计",width:140}]},{prop:"targetFeeRate",label:"预算保单费用率(%) + ",width:180,isShow:!1,children:[{prop:"saleRate",label:"销售费用率(%) + ",width:180,isShow:!1,children:[{prop:"serverFeeRate",label:"手续费率(%)",width:140,isEdit:!1,type:"input"},{prop:"salePersonRate",label:"销售人力薪酬率(%)",width:140,isEdit:!1,type:"input"},{prop:"saleDriverFeeRate",label:"营销推动费用率(%)",width:140,isEdit:!1,type:"input"},{prop:"saleRate",label:"合计",width:140}]},{prop:"fixedFeeRate",label:"固定费用率(%)",width:140,isEdit:!1,type:"input"},{prop:"otherFeeRate",label:"其他费用率(%)",width:140,isEdit:!1,type:"input"},{prop:"targetFeeRate",label:"合计",width:140}]},{prop:"lossBizRatio",label:"亏损业务占比(%)",width:140,isEdit:!1,type:"input"},{prop:"lossBizPremium",label:"严重亏损业务保费规模(元)",width:140,isEdit:!1,type:"input"}],impDialogVisible:!1,budget:{formulateInstitution:"00000",type:"year",channel:"all",timeSlot:"2018",version:"",bore:"policy",productType:"all"},rules:{type:[{required:!0,trigger:"change",message:"预算类型不能为空"}],channel:[{required:!0,trigger:"change",message:"预算渠道不能为空"}],timeSlot:[{required:!0,trigger:"change",message:"预算时间段不能为空"}],productType:[{required:!0,trigger:"change",message:"业务分类不能为空"}]},editFlag:!1,indexList:[{code:"targetPremium",name:"保费收入（元）"},{code:"targetCostRate",name:"保单成本率（%）"},{code:"targetChangeCostRate",name:"变动成本率（%）"},{code:"targetPayRate",name:"保单赔付率（%）"},{code:"targetExpPayRate",name:"理赔费用率（%）"},{code:"targetFeeRate",name:"保单费用率（%）"},{code:"targetDirectExpPayRate",name:"直接理赔费用率（%）"},{code:"targetIndirectExpPayRate",name:"间接理赔费用率（%）"},{code:"saleRate",name:"销售费用率（%）"},{code:"fixedFeeRate",name:"固定费用率（%）"},{code:"otherFeeRate",name:"其他费用率（%）"},{code:"serverFeeRate",name:"手续费率（%）"},{code:"salePersonRate",name:"销售人力薪酬率（%）"},{code:"saleDriverFeeRate",name:"营销推动费用率（%）"}],diyindex:{id:"",diyindexnm:"",indexnm:"",term:"",val:""},diyindexlist:[{id:"1",diyindexnm:"亏损业务",indexnm:"保单成本率（%）",indexcd:"targetCostRate",term:"大于",val:"100%"},{id:"2",diyindexnm:"严重亏损业务",indexnm:"保单成本率（%）",indexcd:"targetCostRate",term:"大于",val:"110%"}],sumBudget:[{prop:"style",label:"预算类型",width:160},{prop:"timeSlot",label:"预算时间段",width:140},{prop:"channel",label:"预算渠道",width:120},{prop:"sumTargetPremium",label:"累计保费收入（元）",width:140},{prop:"sumTargetCostRate",label:"累计保单成本率（%） + ",width:180,isShow:!1,children:[{prop:"sumTargetPayRate",label:"累计保单赔付率(%)",width:140},{prop:"sumTargetFeeRate",label:"累计保单费用率(%)",width:140},{prop:"sumTargetCostRate",label:"合计",width:140}]},{prop:"sumTargetChangeCostRate",label:"累计变动成本率(%) + ",width:180,isShow:!1,children:[{prop:"sumTargetPayRate",label:"累计保单赔付率(%)",width:140},{prop:"sumSaleRate",label:"累计销售费用率(%)",width:140},{prop:"sumTargetChangeCostRate",label:"合计",width:140}]},{prop:"sumTargetBjCostRate",label:"累计边际成本率(%) + ",width:180,isShow:!1,children:[{prop:"sumTargetPayRate",label:"累计保单赔付率(%)",width:140},{prop:"sumServerFeeRate",label:"累计手续费率(%)",width:140},{prop:"sumAddTax",label:"累计增值税附加(%)",width:140},{prop:"sumTargetBjCostRate",label:"合计",width:140}]},{prop:"sumTargetPayRate",label:"累计保单赔付率(%) + ",width:180,isShow:!1,children:[{prop:"sumTargetExpPayRate",label:"累计理赔费用率(%) + ",width:180,isShow:!1,children:[{prop:"sumTargetDirectExpPayRate",label:"累计直接理赔费用率(%)",width:180},{prop:"sumTargetIndirectExpPayRate",label:"累计间接理赔费用率(%)",width:180},{prop:"sumTargetExpPayRate",label:"合计",width:140}]},{prop:"sumTargetComPayRate",label:"累计预期赔付率(%)",width:140},{prop:"sumTargetPayRate",label:"合计",width:140}]},{prop:"sumTargetFeeRate",label:"累计保单费用率(%) + ",width:180,isShow:!1,children:[{prop:"sumTSaleRate",label:"累计销售费用率(%) + ",width:180,isShow:!1,children:[{prop:"sumServerFeeRate",label:"累计手续费率(%)",width:140},{prop:"sumSalePersonRate",label:"累计销售人力薪酬率(%)",width:140},{prop:"sumSaleDriverFeeRate",label:"累计营销推动费用率(%)",width:140},{prop:"sumSaleRate",label:"合计",width:140}]},{prop:"sumFixedFeeRate",label:"累计固定费用率(%)",width:140},{prop:"sumOtherFeeRate",label:"累计其他费用率(%)",width:140},{prop:"sumSumTargetFeeRate",label:"合计",width:140}]},{prop:"sumLossBizRatio",label:"累计亏损业务占比(%)",width:140,isEdit:!1,type:"input"},{prop:"sumLossBizPremium",label:"累计严重亏损业务保费规模(元)",width:140,isEdit:!1,type:"input"}],sumData:[{style:"实际经营值",timeSlot:"",channel:"整体渠道",sumTargetPremium:"9100.21",sumTargetCostRate:"108.23",sumTargetPayRate:"61.15",sumTargetFeeRate:"92.23",sumTargetChangeCostRate:"62.13",sumSaleRate:"23.51",sumTargetBjCostRate:"62.13",sumServerFeeRate:"25.46",sumTargetExpPayRate:"23.75",sumTargetDirectExpPayRate:"43.32",sumTargetIndirectExpPayRate:"13,34",sumTargetComPayRate:"53.43",sumTSaleRate:"43.32",sumSalePersonRate:"23.75",sumSaleDriverFeeRate:"64.32",sumFixedFeeRate:"34.32",sumOtherFeeRate:"23.56",sumLossBizRatio:"23.34",sumLossBizPremium:"12.34",sumAddTax:"3.25"},{style:"预算预估值",timeSlot:"",channel:"整体渠道",sumTargetPremium:"9100.21",sumTargetCostRate:"108.23",sumTargetPayRate:"61.15",sumTargetFeeRate:"92.23",sumTargetChangeCostRate:"62.13",sumSaleRate:"23.51",sumTargetBjCostRate:"62.13",sumServerFeeRate:"25.46",sumTargetExpPayRate:"23.75",sumTargetDirectExpPayRate:"43.32",sumTargetIndirectExpPayRate:"13,34",sumTargetComPayRate:"53.43",sumTSaleRate:"43.32",sumSalePersonRate:"23.75",sumSaleDriverFeeRate:"64.32",sumFixedFeeRate:"34.32",sumOtherFeeRate:"23.56",sumLossBizRatio:"23.34",sumLossBizPremium:"12.34",sumAddTax:"3.25"},{style:"制定预算值",timeSlot:"2018年第一季度",channel:"整体渠道",sumTargetPremium:"9100.21",sumTargetCostRate:"108.23",sumTargetPayRate:"61.15",sumTargetFeeRate:"92.23",sumTargetChangeCostRate:"62.13",sumSaleRate:"23.51",sumTargetBjCostRate:"62.13",sumServerFeeRate:"25.46",sumTargetExpPayRate:"23.75",sumTargetDirectExpPayRate:"43.32",sumTargetIndirectExpPayRate:"13,34",sumTargetComPayRate:"53.43",sumTSaleRate:"43.32",sumSalePersonRate:"23.75",sumSaleDriverFeeRate:"64.32",sumFixedFeeRate:"34.32",sumOtherFeeRate:"23.56",sumLossBizRatio:"23.34",sumLossBizPremium:"12.34",sumAddTax:"3.25"},{style:"预算累计值",timeSlot:"",channel:"整体渠道",sumTargetPremium:"9100.21",sumTargetCostRate:"108.23",sumTargetPayRate:"61.15",sumTargetFeeRate:"92.23",sumTargetChangeCostRate:"62.13",sumSaleRate:"23.51",sumTargetBjCostRate:"62.13",sumServerFeeRate:"25.46",sumTargetExpPayRate:"23.75",sumTargetDirectExpPayRate:"43.32",sumTargetIndirectExpPayRate:"13,34",sumTargetComPayRate:"53.43",sumTSaleRate:"43.32",sumSalePersonRate:"23.75",sumSaleDriverFeeRate:"64.32",sumFixedFeeRate:"34.32",sumOtherFeeRate:"23.56",sumLossBizRatio:"23.34",sumLossBizPremium:"12.34",sumAddTax:"3.25"},{style:"较年度预算偏离值",timeSlot:"",channel:"整体渠道",sumTargetPremium:"9100.21",sumTargetCostRate:"108.23",sumTargetPayRate:"61.15",sumTargetFeeRate:"92.23",sumTargetChangeCostRate:"62.13",sumSaleRate:"23.51",sumTargetBjCostRate:"62.13",sumServerFeeRate:"25.46",sumTargetExpPayRate:"23.75",sumTargetDirectExpPayRate:"43.32",sumTargetIndirectExpPayRate:"13,34",sumTargetComPayRate:"53.43",sumTSaleRate:"43.32",sumSalePersonRate:"23.75",sumSaleDriverFeeRate:"64.32",sumFixedFeeRate:"34.32",sumOtherFeeRate:"23.56",sumLossBizRatio:"23.34",sumLossBizPremium:"12.34",sumAddTax:"3.25"}],showSum:!1,showplus:!1}},watch:{orgCd:function(){this.$store.commit("SET_ADD_DATA",[])}},computed:r()({},Object(s.d)({tableHeader:function(e){return e.app.tableHeader},addData:function(e){return e.budget.addData},formData:function(e){return e.budget.formData}}),{orgCd:function(){return this.budget.formulateInstitution},isLv1Org:function(){return this.orgCd.endsWith("00000")},isLv2Org:function(){return!this.isLv1Org&&this.orgCd.endsWith("000")},isLv3Org:function(){return!this.isLv1Org&&!this.isLv2Org},type:function(){return this.budget.type},timeSlots:function(){var e=this.budget.type+"";return"month"===e?this.resetTime("201801"):"year"===e&&this.resetTime("2018"),[]}}),methods:{importData:function(){var e=this;if("01000"===this.budget.formulateInstitution){var t=this.$createElement;this.$msgbox({title:"提示",message:t("p",null,[t("p",{style:"color: red"},"预算预算不得低于总公司为本机构制定的预算预算!"),t("p",{style:"color: red"},"请确保导入的数据符合此规定!"),t("p",{style:"color: red"},"确定继续导入操作吗?")]),showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then(function(){e.impDialogVisible=!0}).catch(function(){})}else this.impDialogVisible=!0},handleSign:function(e,t,a,i,r){r.forEach(function(i){i.label===e.label&&(i.label=i.label.replace(t,a))}),e.label===i&&r.forEach(function(i){void 0!==i.children&&i.children.forEach(function(i){i.label===e.label&&(i.label=i.label.replace(t,a))})})},hearclick:function(e,t){e.label.includes("+")?(this.handleSign(e,"+","-","销售费用率 + ",this.tempcolumns),this.handleSign(e,"+","-","预算理赔费用率 + ",this.tempcolumns),this.handleSign(e,"+","-","累计理赔费用率 + ",this.sumBudget),this.handleSign(e,"+","-","累计销售费用率 + ",this.sumBudget)):e.label.includes("-")&&(this.handleSign(e,"-","+","销售费用率 - ",this.tempcolumns),this.handleSign(e,"-","+","预算理赔费用率 - ",this.tempcolumns),this.handleSign(e,"-","+","累计理赔费用率 - ",this.sumBudget),this.handleSign(e,"-","+","累计销售费用率 - ",this.sumBudget));var a=void 0,i=void 0;if(e.label.includes("累计")?(a=this.sumBudget,i=["sumTargetPayRate","sumTargetFeeRate"]):(a=this.tempcolumns,i=["targetPayRate","targetFeeRate"]),1===e.level){var r=a.findIndex(function(t){return t.prop===e.property});void 0!==a[r].isShow&&(a[r].isShow=!a[r].isShow)}else if(2===e.level){a.filter(function(e){return e.children}).filter(function(e){return e.prop===i[0]||e.prop===i[1]}).forEach(function(e){e.children.forEach(function(e){e.isShow=!e.isShow})})}},handleInput:function(e){var t=this;e.forEach(function(e){void 0!==e.isEdit?e.isEdit=!e.isEdit:void 0===e.isEdit&&void 0!==e.children&&t.handleInput(e.children)})},edit:function(){this.editFlag=!0,this.handleInput(this.tempcolumns)},save:function(){this.editFlag=!1,this.handleInput(this.tempcolumns)},approval:function(){var e=this,t=this.$createElement;this.$msgbox({title:"提示",message:t("p",null,[t("p",null,"①4个季度累计保费收入预算值小于年度保费收入预算值!"),t("p",null,"②4个季度预算加权合计经营成本率大于年度预算经营成本率!"),t("p",{style:"color: blue"},"确定提交审批吗?")]),showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then(function(){e.$message({type:"success",message:"下发成功!"})}).catch(function(){})},getSummaries:function(e){var t=e.columns,a=e.data,i=[];return a.length>0&&t.forEach(function(e,t){if(0!==t)if(1!==t)if(2!==t)if(3!==t)if(4!==t){var r=a.map(function(a){return 5===t?Number(a[e.property]):Number(a[e.property].replace("%",""))});r.every(function(e){return isNaN(e)})?i[t]="N/A":(i[t]=r.reduce(function(e,t){var a=Number(t);return isNaN(a)?e:e+t},0),5===t?i[t]=i[t].toFixed(2):t>5&&(i[t]/=a.length,i[t]=i[t].toFixed(2),i[t]+="%"))}else i[t]=a[0].productType;else i[t]=a[0].timeSlot;else i[t]=a[0].channel;else i[t]=a[0].type;else i[t]="全国总计:"}),i},download:function(){var e=this;this.$confirm("确定下载预算模板?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then(function(){e.$message({type:"success",message:"预算模板下载成功!"})}).catch(function(){})},upload:function(){var e=this;this.impDialogVisible=!1,this.$message({type:"success",message:"导入成功!"});var t=this.formData.types.find(function(t){return t.code===e.budget.type}),a=t.timeSlots.find(function(t){return t.code===e.budget.timeSlot});this.$store.dispatch("uploadData",{formulateInstitution:this.budget.formulateInstitution,type:t.name,timeSlot:a.name})},exportData:function(){var e=this;this.$confirm("确定导出预算数据吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then(function(){e.$message({type:"success",message:"预算数据导出成功!"})}).catch(function(){})},queryList:function(e,t,a){var i=this;return e.forEach(function(e){e.children&&e.prop===t?a=e.children:e.children&&e.children.length>0&&i.queryList(e.children,t,[])}),a},changeTableData:function(e,t,a){if(t){var i=0;this.queryList(this.tempcolumns,t,[]).forEach(function(t){"合计"!==t.label?i+=Number(e[t.prop]):(e[t.prop]=i.toFixed(2),i=0)})}},addDiyIndex:function(){var e=Object(n.a)();this.diyindex.id=e,this.diyindex.diyindexnm="",this.diyindex.indexnm="",this.diyindex.term="",this.diyindex.val="",this.indexDialogShow=!0},removediyindex:function(){var e=this;this.$confirm("确定删除该定义指标吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then(function(){var t=e.diyindexlist.findIndex(function(t){return t.id===e.diyindex.id});e.diyindexlist.splice(t,1),e.$message({type:"success",message:"删除成功!"})}).catch(function(){})},detaildiyindex:function(e){this.diyindex=this.diyindexlist.find(function(t){return t.id===e}),this.indexDialogShow=!0},commitIndex:function(){var e=this,t=this.diyindexlist.findIndex(function(t){return t.id===e.diyindex.id});-1!==t?this.diyindexlist.splice(t,1,this.diyindex):this.diyindexlist.push(this.diyindex),this.indexDialogShow=!1},handleShowSumTable:function(){this.showplus=!this.showplus}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"data"},[a("div",{staticClass:"form"},[a("query-form",{ref:"addFrom",attrs:{budget:e.budget,rules:e.rules,disable:!0}})],1),e._v(" "),a("div",[a("div",{staticClass:"option"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.isLv3Org,expression:"!isLv3Org"}],attrs:{type:"primary",plain:""},on:{click:e.download}},[e._v("下载预算模板")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.isLv3Org,expression:"!isLv3Org"}],attrs:{type:"primary",plain:""},on:{click:e.importData}},[e._v("导入预算数据")]),e._v(" "),a("el-button",{attrs:{type:"primary",plain:""},on:{click:e.exportData}},[e._v("导出预算数据")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.isLv3Org&&!e.editFlag,expression:"!isLv3Org && !editFlag"}],attrs:{type:"primary",plain:""},on:{click:e.edit}},[e._v("编辑")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.isLv3Org&&e.editFlag,expression:"!isLv3Org && editFlag"}],attrs:{type:"primary",plain:""},on:{click:e.save}},[e._v("保存")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isLv1Org||e.isLv2Org,expression:"isLv1Org || isLv2Org"}],attrs:{type:"primary",plain:""},on:{click:e.approval}},[e._v("下发")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isLv2Org||e.isLv3Org,expression:"isLv2Org || isLv3Org"}],attrs:{type:"primary",plain:""},on:{click:function(t){e.$store.dispatch("uploadData",e.budget)}}},[e._v("查看")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isLv2Org||e.isLv3Org,expression:"isLv2Org || isLv3Org"}],attrs:{type:"primary",plain:""},on:{click:e.approval}},[e._v("确认")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"month"===e.type,expression:"type === 'month'"}],attrs:{type:"primary",plain:""},on:{click:function(t){e.showSum=!0}}},[e._v("经营结果测算")])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"month"===e.type&&e.showSum,expression:"type === 'month' && showSum"}],staticClass:"title",staticStyle:{margin:"0 0 10px 10px"}},[a("div",{staticClass:"desc",staticStyle:{cursor:"pointer"},on:{click:e.handleShowSumTable}},[e.showplus?a("i",{staticClass:"el-icon-minus"}):a("i",{staticClass:"el-icon-plus"}),e._v(" "),a("span",[e._v("累计预算")])])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"month"===e.type&&e.showplus,expression:"type === 'month' && showplus"}],staticClass:"table"},[a("el-table",{attrs:{stripe:"",border:"","header-cell-style":e.tableHeader,"max-height":"550",data:e.sumData},on:{"header-click":e.hearclick}},e._l(e.sumBudget,function(t,i){return a("el-table-column",{key:Math.random()+i,attrs:{"header-align":"center",prop:t.prop,label:t.label,width:t.width,align:t.align?t.align:"center"},scopedSlots:e._u([{key:"default",fn:function(i){return[t.isEdit&&"input"===t.type?a("el-input",{attrs:{size:"small"},on:{input:function(t){e.changeTableData(i.row)}},model:{value:i.row[t.prop],callback:function(a){e.$set(i.row,t.prop,a)},expression:"scope.row[column.prop]"}}):a("span",[e._v(e._s(i.row[t.prop]))])]}}])},[t.isShow?e._l(t.children,function(i,r){return a("el-table-column",{key:Math.random()+r,attrs:{"header-align":"center",prop:i.prop,"min-width":i.width,label:i.label,align:i.align?i.align:"center"},scopedSlots:e._u([{key:"default",fn:function(r){return[i.isEdit&&"input"===i.type?a("el-input",{attrs:{size:"small"},on:{input:function(a){e.changeTableData(r.row,t.prop,i.prop)}},model:{value:r.row[i.prop],callback:function(t){e.$set(r.row,i.prop,t)},expression:"scope.row[subColumn.prop]"}}):a("span",[e._v(e._s(r.row[i.prop]))])]}}])},[i.isShow?e._l(i.children,function(t,r){return a("el-table-column",{key:Math.random()+r,attrs:{"header-align":"center",prop:t.prop,"min-width":t.width,label:t.label,align:t.align?t.align:"center"},scopedSlots:e._u([{key:"default",fn:function(r){return[t.isEdit&&"input"===t.type?a("el-input",{attrs:{size:"small"},on:{input:function(a){e.changeTableData(r.row,i.prop,t.prop)}},model:{value:r.row[t.prop],callback:function(a){e.$set(r.row,t.prop,a)},expression:"scope.row[thirdColumn.prop]"}}):a("span",[e._v(e._s(r.row[t.prop]))])]}}])})}):e._e()],2)}):e._e()],2)}))],1),e._v(" "),e._m(0),e._v(" "),a("div",{staticClass:"table"},[a("el-table",{attrs:{stripe:"",border:"","header-cell-style":e.tableHeader,"max-height":"550",data:e.addData},on:{"header-click":e.hearclick}},e._l(e.tempcolumns,function(t,i){return a("el-table-column",{key:Math.random()+i,attrs:{"header-align":"center",prop:t.prop,label:t.label,width:t.width,align:t.align?t.align:"center"},scopedSlots:e._u([{key:"default",fn:function(i){return[t.isEdit&&"input"===t.type?a("el-input",{attrs:{size:"small"},on:{input:function(t){e.changeTableData(i.row)}},model:{value:i.row[t.prop],callback:function(a){e.$set(i.row,t.prop,a)},expression:"scope.row[column.prop]"}}):a("span",[e._v(e._s(i.row[t.prop]))])]}}])},[t.isShow?e._l(t.children,function(i,r){return a("el-table-column",{key:Math.random()+r,attrs:{"header-align":"center",prop:i.prop,"min-width":i.width,label:i.label,align:i.align?i.align:"center"},scopedSlots:e._u([{key:"default",fn:function(r){return[i.isEdit&&"input"===i.type?a("el-input",{attrs:{size:"small"},on:{input:function(a){e.changeTableData(r.row,t.prop,i.prop)}},model:{value:r.row[i.prop],callback:function(t){e.$set(r.row,i.prop,t)},expression:"scope.row[subColumn.prop]"}}):a("span",[e._v(e._s(r.row[i.prop]))])]}}])},[i.isShow?e._l(i.children,function(t,r){return a("el-table-column",{key:Math.random()+r,attrs:{"header-align":"center",prop:t.prop,"min-width":t.width,label:t.label,align:t.align?t.align:"center"},scopedSlots:e._u([{key:"default",fn:function(r){return[t.isEdit&&"input"===t.type?a("el-input",{attrs:{size:"small"},on:{input:function(a){e.changeTableData(r.row,i.prop,t.prop)}},model:{value:r.row[t.prop],callback:function(a){e.$set(r.row,t.prop,a)},expression:"scope.row[thirdColumn.prop]"}}):a("span",[e._v(e._s(r.row[t.prop]))])]}}])})}):e._e()],2)}):e._e()],2)}))],1),e._v(" "),a("el-dialog",{attrs:{title:"导入预算数据",visible:e.impDialogVisible,width:"40%"},on:{"update:visible":function(t){e.impDialogVisible=t}}},[a("el-upload",{attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:""}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("选择文件")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传excel文件")])],1),e._v(" "),a("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:e.upload}},[e._v("导入")]),e._v(" "),a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){e.impDialogVisible=!1}}},[e._v("关闭")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"指标定义",visible:e.indexDialogShow,width:"30%"},on:{"update:visible":function(t){e.indexDialogShow=t}}},[a("div",{staticClass:"form"},[a("el-form",{attrs:{size:"small",model:e.diyindex}},[a("el-form-item",{attrs:{label:"定义指标名称",prop:"diyindexnm"}},[a("el-input",{attrs:{size:"medium"},model:{value:e.diyindex.diyindexnm,callback:function(t){e.$set(e.diyindex,"diyindexnm",t)},expression:"diyindex.diyindexnm"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"选择指标",prop:"indexnm"}},[a("el-select",{attrs:{placeholder:"请选择指标",size:"medium"},model:{value:e.diyindex.indexnm,callback:function(t){e.$set(e.diyindex,"indexnm",t)},expression:"diyindex.indexnm"}},e._l(e.indexList,function(e){return a("el-option",{key:e.code,attrs:{value:e.name,label:e.name}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"条件",prop:"term"}},[a("el-select",{attrs:{size:"medium"},model:{value:e.diyindex.term,callback:function(t){e.$set(e.diyindex,"term",t)},expression:"diyindex.term"}},[a("el-option",{attrs:{value:"大于",label:"大于"}}),e._v(" "),a("el-option",{attrs:{value:"等于",label:"等于"}}),e._v(" "),a("el-option",{attrs:{value:"小于",label:"小于"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"条件值",prop:"val"}},[a("el-input",{attrs:{size:"medium"},model:{value:e.diyindex.val,callback:function(t){e.$set(e.diyindex,"val",t)},expression:"diyindex.val"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{plain:"",size:"small",type:"primary"},on:{click:e.commitIndex}},[e._v("确定")])],1)],1)],1)])],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title",staticStyle:{margin:"20px 0 10px 10px"}},[t("div",{staticClass:"desc"},[this._v("预算配置列表")])])}]},p=a("VU/8")(l,o,!1,null,null,null);t.default=p.exports}});